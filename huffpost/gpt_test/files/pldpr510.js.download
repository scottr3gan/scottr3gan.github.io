/*
 Nielsen SDK package v0.9.28-3 
 (c) 2017 The Nielsen Company 
*/
/* PLDPR build v5.0.0.65*/
window.NOLCMB.registerLib("PLDPR",function(a){"use strict";function e(a,e){var t=[],n=a.split("&"),r,o;for(r=0,o=n.length;r<o;r+=1)0!==n[r].indexOf(e)&&t.push(n[r]);return t.join("&")}function t(a){return a<10?"0"+a:""+a}function n(a,e){var n=new Date(1e3*e),r=n.getUTCFullYear().toString(),o=t(n.getUTCMonth()+1),i=t(n.getUTCDate());M({data:a,param:"nol_dayId",val:Fa[n.getUTCDay()]}),M({data:a,param:"nol_hourCode",val:t(n.getUTCHours())}),M({data:a,param:"nol_dataDate",val:r+o+i})}function r(a,e){var t=a.split("||"),n=t[0]||a;if(window)for(var r=0,o=t.length;r<o;r+=1)n=t[r],"undefined"!=typeof window["on"+n]&&(window.addEventListener?window.addEventListener(n,e,!1):window.attachEvent&&window.attachEvent("on"+n,e))}function o(a,e){var t;if("num"==e)t=parseInt(a,10),a=isNaN(t)?0:t;else if("bin"==e)a=isNaN(Number(a))?"0":Number(a).toString(2);else if("bool"==e)switch(a.toString().toLowerCase()){case"false":case"no":case"0":case"":a=!1;break;default:a=!0}else"b2n"==e&&(t=parseInt(a,2),a=isNaN(t)?0:t);return a}function i(a){var e,t=[];for(e=0;e<o(a,"num");e+=1)t.push({tsv:0,save:!1,updated:!1});return t}function d(a){return{tags:[],eventQueue:a&&a.eventQueue?a.eventQueue:[],tagSize:1,bReInit:!1,debug:Pa,eventQueueIndex:0}}function s(a){var t;void 0!==a&&0!==a.length&&(t=window.document.createElement("script"),t.type="text/javascript",t.src=e(a,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),t.onerror=function(a){var e=a.target.src;window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target),ua<va&&(ua+=1,window.setTimeout(function(){s(e)},5e3))},t.onload=function(a){ua=0,window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target)},window.document.head?window.document.head.appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t))}function l(){var e=Array.prototype.slice.call(arguments);a._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function p(a){return encodeURIComponent(a).replace("'","%27")}function c(a){var e=0===ta.indexOf("https")?"https":"http",t,n,r,o=a.url,i=a.hasOwnProperty("maskRef")?a.maskRef:-1;if("__sendIt"!==o&&"https"===e&&o.indexOf("https")===-1&&(o=e+o.substr(o.indexOf("://"))),a.prod&&"ocr"===a.prod&&o.indexOf("&ty=js")!==-1)return void s(o);if(ga||"__sendIt"===o)if(o&&ga&&ha)Ta.push(o);else if("__sendIt"!==o||ha)o&&ga&&!ha&&fa.push(o);else{for(ha=!0,t=0,n=fa.length;t<n;t+=1)Ia.setup({pingSendTime:P(a.serverTimeOffset),url:fa.shift(),maskRefUrl:i});fa=fa.concat(Ta),ha=!1,Ta=[]}else Ia.setup({pingSendTime:P(a.serverTimeOffset),url:o,maskRefUrl:i})}function m(a,e){var t="",n,r,o,i;if(!a||!e)return a;for(i=e.length,r=0,o=a.length;r<o;r+=1)n=a.charCodeAt(r)^e.charCodeAt(r%i),t+=0===n?a.charAt(r):String.fromCharCode(n);return t}function u(e,t,n,r){var o,i;n.indexOf("[")===-1&&n.indexOf("]")===-1&&(!r.val||r.val.length<=0)?(f(e,{type:"100",msg:n+" missing -- "+M({data:e,param:"nol_comment"})}),r.state=!1,r.val=""):"{"===t||"}"===t?r.val=a.CryptoJS.MD5(r.val.toString()).toString():"<"===t||">"===t?(o=n.match(sa["<"].end),o?(i=o[0].match(/[\d]+/g),r.val=String(r.val).substr(i[0],i[1])):r.val=m(String(r.val),M({data:e,param:"nol_xorSeed"}))):"("!==t&&")"!==t||(r.val=p(r.val))}function v(a,e){var t=e.match(/[\[\{<\(]/g),n,r,o,i,d,s,l,p,c,m,v,_,g=M({data:a,param:"nol_xorSeed"})||"",y,h;if(t=t?t.reverse():[],r=e.match(/[\}\]\>\)]/g)||[],i={start:t.length?e.lastIndexOf(String(t[0])):-1,end:r.length?e.indexOf(String(r[0])):e.length},r&&">"===r[0]&&(i.end=e.search(sa["<"].end)||e.indexOf(">")),s=e.substring(i.start+1,i.end),c=s.split("||"),c.length>0)for(m=0,v=c.length;m<v&&(s=c[m],_=M({data:a,param:s}),!(_&&_.length>0));m+=1);else _=M({data:a,param:s});if(_&&_.length>0&&(h="string"==typeof s?s.split("_"):s,y=h[0]?h.splice(0,2).join("_"):h,d=ba[y]?ba[y].encoding:"",d&&(t=t.reverse().concat(d.match(/[\[\{<\(]/g)).reverse(),r=r.reverse().concat(d.match(/[\}\]>\)]/g)).reverse())),n={val:_,state:M({data:a,param:"nolPriv_sendData"})},l=t?t.length:0,p=r?r.length:0,o=Math.min(l,p),o>0)for(m=0,v=o;m<v;m+=1)u(a,t[0]||r[0],e,n,g),t.shift(),r.shift();else(!n.val||n.val&&n.val.length<=0)&&(n.state=!1,n.val="",f(a,{type:100,msg:s+" missing "+M({data:a,param:"nol_comment"})}));return{val:n.val,strManipulate:t,strManiEnd:r}}function _(a,e){var t,n,r={val:"",state:M({data:a,param:"nolPriv_sendData"})},o=M({data:a,param:"nol_md5Seed"}),i,d,s,l=[],p,c=[],m=[],_,f="",g,y,h,T,P,S,w=M({data:a,param:"nol_xorSeed"});if(e=e||M({data:a,param:"nol_url"})||"",n=e.match(la.regex),null!==n)for(y=0,h=n.length;y<h;y+=1){if(t=n[y],i=t.substr(la.length,t.length-2*la.length),d=i.split("+"),l=[],f="",s=0,d&&d.length>1){for(T=0,P=d.length;T<P;T+=1)if(f=d[T],p=v(a,f),p.strManipulate.length>0&&(s=l.length,c=[].concat(p.strManipulate,c)),l[s]=l[s]?l[s]+p.val:p.val,p.strManiEnd.length>0&&p.strManiEnd.length!==c.length){for(m=[].concat(m,p.strManiEnd),r={val:l[s],state:M({data:a,param:"nolPriv_sendData"})},_=0,S=p.strManiEnd.length;_<S;_+=1)u(a,c[0],f,r,w),c.shift(),m.shift();l[s]=r.val}for(r.val=l.join(""),g=c.length>=m.length?c:m,_=0,S=g.length;_<S;_+=1)u(a,g[0],f,r,w),c.shift(),m.shift()}else p=v(a,i),r={val:p.val,state:M({data:a,param:"nolPriv_sendData"})};e=e.replace(t,r.val)}return e}function f(e,t,n){var r,o,i=M({data:e,param:"nolPriv_errorSent"});M({data:e,param:"nolPriv_sendData",val:!1}),(n||(!t||i.indexOf(t.type.toString()))===-1)&&Va.isInitialized(e)&&(r=t.type+","+p(t.msg),M({data:e,param:"nol_errorMessage",val:r}),a._listeners.fireEvent("error",{type:"error",msg:r}),o=_(e,M({data:e,param:"nol_errorURL"})),c({serverTimeOffset:M({data:e,param:"nolPriv_serverTimeOffset"}),url:o,maskRef:M({data:e,param:"nol_rfrmsk"})}),i+=t.type.toString()+",",M({data:e,param:"nolPriv_errorSent",val:i}))}function g(a){var e=!1;e&&l(a)}function y(a,e,t){t&&!t.serviceSending[e]&&(t.serviceSending[e]=!0,s(a))}function h(a,e){var t=a||6;return Math.ceil(e/t)*t||"0"}function T(a,e){var t=!1,n=0,r=!1,i=o(M({data:a,param:"nol_unQualSegmentValue"}),"num"),d=M({data:a,param:"nol_minutes"}),s=[],l=!!e&&e.save,p,c,m,u=o(M({data:a,param:"nol_segmentTimeSpent"}),"num"),v=o(M({data:a,param:"nol_sendQual"}),"num"),_=M({data:a,param:"nol_cadence"});for(p=0,c=d.length;p<c;p+=1)m=Math.floor(d[p].tsv/M({data:a,param:"nol_creditValue"})),m>=1?(d[p].save&&"daypart"!==M({data:a,param:"nol_cadence"})?s.push(0):(s.push(M({data:a,param:"nol_creditFlag"})),n+=1,t=!0),r=!0):(s.push(0),r=!1),l?d[p].save=r:(d[p].tsv=0,d[p].save=!1,d[p].updated=!1);return M({data:a,param:"nol_duration",val:s.join("")}),v&&(t=n>=v),o(M({data:a,param:"nol_minWonOverride"}),"bool")===!0&&(t=!0),t||"interval"!==_&&"streamduration"!==_||l||("S"===M({data:a,param:"nol_segmentPrefix"})&&i&&M({data:a,param:"nol_duration",val:h(i,u)}),t=u>1),t}function P(a){return"undefined"!=typeof a?(xa()/1e3>>0)+a:xa()/1e3>>0}function S(a,e){var t=M({data:a,param:"nol_url"})||"",n,r,d,s,p=0,m,u=M({data:a,param:"nol_playerId"}),v=o(M({data:a,param:"nol_maxPingCount"}),"num"),f=o(M({data:a,param:"nol_pingCount"}),"num"),y=!!e&&e.returnLength,h=M({data:a,param:"nol_cadence"}),S=M({data:a,param:"nol_eventFilter"}),w=o(M({data:a,param:"nol_maxLength"}),"num");if(M({data:a,param:"nol_pingCreationTime",val:P(M({data:a,param:"nolPriv_serverTimeOffset"}))}),r=M({data:a,param:"nol_timeSpentViewing"}).content,d=M({data:a,param:"nol_timeSpentViewing"}).ad,s=M({data:a,param:"nol_timeSpentViewing"}).static,("dcrvideo"!==M({data:a,param:"nol_product"})||"1"===M({data:a,param:"nol_forceFireOnClose_content"})||!("dcrvideo"===M({data:a,param:"nol_product"})&&0===r.nol_segmentTimeSpent||"dcrstatic"===M({data:a,param:"nol_product"})&&0===s.nol_segmentTimeSpent)||"interval"!==h&&"streamduration"!==h||0!==d.nol_count||0!==d.nol_segmentTimeSpent)&&"false"===M({data:a,param:"nol_disabled"})&&(0===v||v>f)){if(Ma.setNextTick(a,null,"content"),n=T(a,e)||"stream"===h||"impression"===h||"id3"===M({data:a,param:"nol_product"}),t=_(a,t),p=t.length,M({data:a,param:"nolPriv_sendData"})&&n&&!y||w>0&&w<p){if(M({data:a,param:"nol_id3Data"})&&M({data:a,param:"nol_id3Data",val:!1}),l(M({data:a,param:"nol_comment"})," -queued @"+Math.floor(xa()/1e3)+", timeOffset == "+M({data:a,param:"nolPriv_serverTimeOffset"})+", DU == "+M({data:a,param:"nol_segmentTimeSpent"})+" -- ",t),S.onSendPing&&(x(a,S.onSendPing),"true"===M({data:a,param:"nol_disabled"})))return;c({serverTimeOffset:M({data:a,param:"nolPriv_serverTimeOffset"}),url:t,prod:M({data:a,param:"nol_product"}),maskRef:M({data:a,param:"nol_rfrmsk"})}),M({data:a,param:"nol_viewCount_"+a._currVidType.toLowerCase(),val:"0"}),Ma.clear(a),ca&&ca.hasOwnProperty(u)&&ca[u].hasOwnProperty("debug")&&"logging"===ca[u].debug&&(m=M({data:a,param:"nol_debugUrl"}),m||(m=M({data:a,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),m+="pli="+u+"&sendPing="+M({data:a,param:"nol_product"})+"&"+t.substring(t.indexOf("?")+1),g(m)),f+=1,r.nol_segmentTimeSpent=0,r.nol_count=0,d.nol_segmentTimeSpent=0,d.nol_count=0,s.nol_segmentTimeSpent=0,s.nol_count=0,M({data:a,param:"nol_pingStartTimeUTC",val:Math.round(xa()/1e3)}),M({data:a,param:"nolPriv_priority",val:0}),M({data:a,param:"nol_pingCount",val:f.toString()}),M({data:a,param:"nol_forceFireOnClose_content",val:"0"});var b=i(M({data:a,param:"nol_segmentLength"}));M({data:a,param:"nol_duration",val:new Array(b.length+1).join("0")})}else if(y)return{len:p,fData:t};return null}}function w(e){try{if("undefined"==typeof e)return;var t=i(M({data:e,param:"nol_segmentLength"}));M({data:e,param:"nol_minutes",val:t}),M({data:e,param:"nol_duration",val:new Array(t.length+1).join("0")})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function b(a,e){var t=o(M({data:a,param:"nol_segmentLength"}),"num")*o(M({data:a,param:"nol_segmentValue"}),"num"),n={segment:Math.floor(e/t+1),minute:Math.floor(e%t/M({data:a,param:"nol_segmentValue"})),seconds:e%M({data:a,param:"nol_segmentValue"})};return n}function O(e,t){var r,d=M({data:t,param:"nol_tagSrc"}),e=""!==e?e:"id3"===d&&M({data:t,param:"nol_fdcid"})!==M({data:t,param:"nol_cidNull"})?M({data:t,param:"nol_fdoffset"}):"id3"===d&&M({data:t,param:"nol_pccid"})!==M({data:t,param:"nol_cidNull"})?M({data:t,param:"nol_fdoffset"}):e,s=M({data:t,param:"nol_eventFilter"}),l=M({data:t,param:"nol_minutes"}),p=o(M({data:t,param:"nol_pingCount"}),"num"),c,m,u,v,_,f,g,y,h=M({data:t,param:"nol_playerId"}),T=a._players&&a._players.hasOwnProperty(h)?a._players[h]:-1,P=M({data:t,param:"nol_localDay"}),w=M({data:t,param:"nol_dayQhr"}),O=M({data:t,param:"nol_weekQhr"}),C,E,k,L=M({data:t,param:"nol_wmDay"}),I=M({data:t,param:"nol_wmDayQhr"}),A,V,D=o(M({data:t,param:"nol_weekEndUTC"}),"num"),R=o(M({data:t,param:"nol_weekStartUTC"}),"num"),F=D-R,N,j=o(M({data:t,param:"nolPriv_serverTimeOffset"}),"num"),B,U=M({data:t,param:"nol_timer"})||"nol_fdoffset",Q=o(M({data:t,param:"nolPriv_currMin"}),"num"),G=o(M({data:t,param:"nol_maxPingCount"}),"num"),W=o(M({data:t,param:"nol_creditValue"}),"num"),H=o(e,"num"),J=o(M({data:t,param:"nol_intrvlThrshld"}),"num")||86400,z="nol_cmsoffset"===U||"nol_pageoffset"===U?o(M({data:t,param:"nol_cmsIntrvlGp"}),"num")||2:o(M({data:t,param:"nol_id3IntrvlGp"}),"num"),Y=o(M({data:t,param:"nol_segmentLength"}),"num")*o(M({data:t,param:"nol_segmentValue"}),"num"),K=o(M({data:t,param:"nol_currSeg"}),"num"),X=o(M({data:t,param:"nolPriv_now"}),"num"),Z,$=M({data:t,param:"nol_timeSpentViewing"})[t._currVidType],aa=o(M({data:t,param:"nolPriv_currPos"}),"num");if(A=Math.floor(H/86400)+1,L||M({data:t,param:"nol_wmDay",val:A}),V=Math.floor(H%86400/900)+1,I||M({data:t,param:"nol_wmDayQhr",val:V}),H>86400&&"nol_cmsoffset"===U?(H+=j,y=H+o(M({data:t,param:"nol_startDayTimeOffset"}),"num"),f=y+o(M({data:t,param:"nol_GMTOffset"}),"num")):y=f=H,C=Math.floor(f/86400)+1,P&&P!=C&&S(t),P||M({data:t,param:"nol_localDay",val:C}),H>D&&(s.onWeekEndUTC?x(t,s.onWeekEndUTC):(M({data:t,param:"nol_week",val:M({data:t,param:"nol_nextWeek"})}),M({data:t,param:"nol_period",val:M({data:t,param:"nol_nextPeriod"})}),M({data:t,param:"nol_weekStartUTC",val:D+1}),M({data:t,param:"nol_weekEndUTC",val:D+1+F}))),E=Math.floor((H-o(M({data:t,param:"nol_weekStartUTC"}),"num"))/900)+1,O&&E===O||M({data:t,param:"nol_weekQhr",val:E}),"nol_cmsoffset"===U&&(H=f%86400),k=Math.floor(H/900)+1,w||M({data:t,param:"nol_dayQhr",val:k}),H=Math.floor(H),"1"===M({data:t,param:"nol_applyViewInc"})&&(q(t),M({data:t,param:"nol_applyViewInc",val:"0"})),!("true"===M({data:t,param:"nol_disabled"})||void 0===H||G>0&&G<=p&&"daypart"!==M({data:t,param:"nol_cadence"}))){var ea=M({data:t,param:"nol_devTimeZone"}),ta=/^GMT([-+]?)([0-9]+):([0-9]+)$/.exec(ea);if(ta){var na="-"==ta[1]?-60:60;n(t,xa()/1e3+na*(60*Number(ta[2])+Number(ta[3])))}if("stream"!==M({data:t,param:"nol_cadence"})&&"impression"!==M({data:t,param:"nol_cadence"})){if(aa=""===aa?H:o(aa,"num"),X||(X=xa()),B=Math.ceil((xa()-X)/1e3)||1,Z=b(t,aa),r=Z.segment,N=Z.minute,c=Z.seconds,_=H-aa,M({data:t,param:"nolPriv_currPos",val:H}),K&&void 0!==r&&K!==r&&(("dcrvideo"!==M({data:t,param:"nol_product"})||"dcrvideo"===M({data:t,param:"nol_product"})&&M({data:t,param:"nol_segmentTimeSpent"})>0)&&S(t,{save:!0}),"episode"!==M({data:t,param:"nol_cadence"})&&M({data:t,param:"nol_pingCount",val:0}),l=i(M({data:t,param:"nol_segmentLength"})),M({data:t,param:"nol_minutes",val:l}),w&&w!==k&&(M({data:t,param:"nol_dayQhr",val:k}),M({data:t,param:"nol_weekQhr",val:E}),P&&P!==C&&M({data:t,param:"nol_localDay",val:C})),I&&I!==V&&M({data:t,param:"nol_wmDayQhr",val:V}),L&&L!==A&&M({data:t,param:"nol_wmDay",val:A})),K=r,void 0!==N&&_>0){if(Q!==N&&(l[N].save||"daypart"===M({data:t,param:"nol_cadence"})||(l[N].tsv>=W?S(t):(l[N].tsv=0,l[N].updated=!1))),_<z||_<=Math.ceil(1.5*B)&&_<J)for(g=o(M({data:t,param:"nol_sendQual"}),"num"),m=0;m<_;m+=1){if((c+m)%M({data:t,param:"nol_segmentValue"})!==0){if("daypart"!==M({data:t,param:"nol_cadence"})&&l[N].tsv>=M({data:t,param:"nol_segmentValue"})&&(l[N].save?(l[N].tsv=0,l[N].save=!1,l[N].updated=!1):S(t)),l[N].tsv+=1,$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1,l[N].tsv>=W&&g){for(l[N].updated||(M({data:t,param:"nolPriv_priority",val:xa()}),l[N].updated=!0),u=0,v=0;u<l.length;u+=1)if(v+=l[u].tsv>=W?1:0,v>=g){g="send";break}"send"===g&&M({data:t,param:"nol_sendQual"})&&(s.onViewWon&&x(t,s.onViewWon),S(t,{save:!0}),g=0,"daypart"!==M({data:t,param:"nol_cadence"})&&M({data:t,param:"nol_sendQual",val:"0"}))}}else 0!==m&&(N+=1),l.length<=N?(S(t,{save:!0}),N=0,K+=1,M({data:t,param:"nol_currSeg",val:K}),M({data:t,param:"nol_pingCount",val:0}),l=i(M({data:t,param:"nol_segmentLength"})),M({data:t,param:"nol_minutes",val:l}),w&&w!==k&&(M({data:t,param:"nol_dayQhr",val:k}),M({data:t,param:"nol_weekQhr",val:E}),P&&P!==C&&M({data:t,param:"nol_localDay",val:C})),I&&I!==V&&M({data:t,param:"nol_wmDayQhr",val:V}),L&&L!==A&&M({data:t,param:"nol_wmDay",val:A})):"daypart"!==M({data:t,param:"nol_cadence"})&&!l[N].save&&l[N].tsv>=W?S(t):l[N].save||(l[N].tsv=1,l[N].updated=!1),c=1,$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1;M({data:t,param:"nolPriv_currMin",val:N})}M({data:t,param:"nolPriv_now",val:xa()}),T!==-1&&"dcrstatic"!==M({data:t,param:"nol_product"})&&(T.pauseObj.pauseTime=0)}}else r=Math.floor(H/Y+1),"content"===M({data:t,param:"nol_ac"})&&(K=r,M({data:t,param:"nol_currSeg",val:K})),S(t);M({data:t,param:"nol_currSeg",val:K})}}function C(a,e,t){var n=M({data:a,param:"iag_"+e});return void 0!==n&&""!==n?t="&pr=iag."+e+","+p(n):t&&t.length>0&&t.indexOf("&pr=iag")===-1?t="&pr=iag."+e+","+p(t):void 0!==t&&null!==t||(t=""),t}function E(a,e){var t,n,r,i,d,s,l,c,m,u,v,_,f,g,y,h,T=M({data:a,param:"nol_vidtype"});M({data:a,param:"nol_prod"}).indexOf("iag")>=0&&(t="",n=C(a,"sid",M({data:a,param:"nol_sid",vidType:"content"})),r=C(a,"tfid",M({data:a,param:"nol_tfid",vidType:"content"})),i=C(a,"bcr",M({data:a,param:"nol_clientid",vidType:"content"})),s=C(a,"epi",M({data:a,param:"nol_title"})||M({data:a,param:"nol_title",vidType:"content"})),d=C(a,"pgm",M({data:a,param:"nol_censuscategory"})||M({data:a,param:"nol_category"})||M({data:a,param:"nol_iagcategory"})),d||(d=C(a,"pgm",M({data:a,param:"nol_censuscategory",vidType:"content"})||M({data:a,param:"nol_category",vidType:"content"})||M({data:a,param:"nol_iagcategory",vidType:"content"})),d||(d="&pr=iag.pgm,general")),l="&pr=iag.seg,",l+=o(M({data:a,param:"nol_chapter",vidType:"content"}),"num")>1?M({data:a,param:"iag_seg"})||M({data:a,param:"nol_chapter",vidType:"content"}):"1",c=C(a,"pd",c),m=C(a,"oad",m),f=C(a,"fp",f),h=C(a,"cust1",h),"ad"===e?(u="&pr=iag.brn,"+M({data:a,param:"nol_clientid"}),v="&pr=iag.cte,"+p(M({data:a,param:"nol_adURL"})),_="midroll"===T?"&pr=iag.ap,mid":"postroll"===T?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=C(a,"sid",n),r=C(a,"tfid",r),i=C(a,"bcr",i),u=C(a,"brn",u),v=C(a,"cte",v),d=C(a,"pgm",d),s=C(a,"epi",s),l=C(a,"seg",l),c=C(a,"pd",c),m=C(a,"oad",m),g=C(a,"pod",g),y=C(a,"apt",y),t=n+r+i+d+s+l+c+u+_+v+m+f+g+y+h):t=n+r+i+d+s+l+c+m+f+h,t+="&pr=iag.cp,soc",M({data:a,param:"nol_iagData",val:t}))}function k(e){var t;if(ca[e.id]&&ca[e.id].tags.length===ca[e.id].tagSize){if(a._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),ca[e.id].debug!==Pa&&"logging"===ca[e.id].debug){if(t=ca[e.id].nol_debugUrl,t||(t=ca[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),ca[e.id].eventQueue.length>ca[e.id].eventQueueIndex+1)for(var n=ca[e.id].eventQueueIndex;n<ca[e.id].eventQueue.length;n++)g(t+"pli="+e.id+"&ggpm="+JSON.stringify(ca[e.id].eventQueue[n])),ca[e.id].eventQueueIndex=n;t+="pli="+e.id+"&ggpm="+JSON.stringify(e),g(t)}e.timeStamp=xa();for(var n=0,r=ca[e.id].tags.length;n<r;n+=1)ca.hasOwnProperty(e.id)&&ca[e.id].tags[n].eventListener(e)}else ca[e.id]&&ca[e.id].eventQueue||(ca[e.id]=d(ca[e.id])),ca[e.id].eventQueue.push(e)}function L(a,e){var t,n;ca[e].bReInit||(ca[e].bReInit=!0,ca[e].eventQueue=[],a&&ca[e].eventQueue.push(a),s(wa))}function I(a,e,t){var n=!1,r=t.toString().toLowerCase().indexOf(e.toString().toLowerCase());return"-"===a&&r===-1?n=!0:"+"===a&&(t===e||r!==-1&&t&&e)?n=!0:"--"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())===-1?n=!0:"++"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())!==-1&&(n=!0),n}function x(a,e,t){var n=e||M({data:a,param:"nol_finalFilter"}),r,o,i,d,s,l,p,c,m,u,v,_=t||{};if(n&&void 0!==n)for(r=0,o=n.length;r<o;r+=1){if(c=n[r],c.tagVar.length)for(var i=0,d=c.tagVar.length;i<d&&(u=M({data:a,param:c.tagVar[i].name}),u);i++);else u=M({data:a,param:c.tagVar.name});if(u&&c.tagVar.value===u){for(i=0,d=c.cond.length;i<d;i+=1){if(p=_[c.cond[i]]||M({data:a,param:c.cond[i]}),l=0===c.is.value.indexOf("nol_")&&M({data:a,param:c.is.value})?M({data:a,param:c.is.value}):c.is.value,void 0===p||void 0===l||!I(c.is.type,p,l)){m=!1;break}m=!0}if(void 0!==m&&(v=m?c.then:c.else,void 0!==v))for(s in v)v.hasOwnProperty(s)&&(void 0!==_.nol_vidtype?_[s]=v[s]:M({data:a,param:s,val:v[s]}))}}}function A(a,e){var t,n=a.data._settings,r=a.param;return void 0===e||null===e?(t=n.hasOwnProperty(r)&&ca[n.playerId].nol_tagMap.hasOwnProperty(r)&&("object"==typeof ca[n.playerId].nol_tagMap[r]||"array"==typeof ca[n.playerId].nol_tagMap[r])?ca[n.playerId].nol_tagMap[r][n[r]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]:ca[n.playerId].nol_tagMap.nol_defaults[r]||ca[n.playerId][r],void 0===t&&(t=n.hasOwnProperty(r)?n[r]:ca[n.playerId].nol_tagMap[r])):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]=e:n[r]=e,t}function M(a){if(a){var e="string"==typeof a.param?a.param.split("_"):a.param,t,n=e[0]?e.splice(0,2).join("_"):e,r=a.vidType||e[0]||a.data._currVidType,o=a.data._currAssetid||"0",i=a.data._dataArrObj[r][o],d=ba[n]?ba[n].clientField:n;if("object"==typeof d)t=i;else if("nol_segmentTimeSpent"===d||"nol_cumeTimeSpent"===d||"nol_count"===d){var s=M({data:a.data,param:"nol_timeSpentViewing"});t=s[r][d]}else void 0===a.val||null===a.val?(t=i&&i.hasOwnProperty(d)?i[d]:ca[a.data._settings.playerId][d],void 0!==t&&""!==t||(t=A(a)||"",void 0!==t&&""!==t||(0===d.indexOf("nol_")?a.param=d:a.param=n,t=A(a)||""))):i&&(i[d]=a.val);return t}return null}function V(e,t){var n=Va.findPlayer(e),r=n.oServiceCall[t.service],o=t.url,i=t.key,d;if(t.evntCB=M({data:e,param:e.serviceFlag[t.service].callback}),t.callBack=function(a){D(e,a,t)},!r&&i&&o&&o.length>0)"stnupdate"===t.evntCB&&("undefined"==typeof n.oServiceCall[t.service]||"undefined"==typeof n.oServiceCall[t.service].status||"init"!==n.oServiceCall[t.service].status&&"complete"!==n.oServiceCall[t.service].status)&&(n.oServiceCall[t.service]={status:"init",station:null,data:null}),a._listeners.addListener(t.evntCB,t.callBack,!0),y(_(e,o),t.service,n);else if(r&&"init"===r.status);else if(r&&"complete"===r.status&&i!==r.station)a._listeners.addListener(t.evntCB,t.callBack,!0),y(_(e,o),t.service,n);else if(r&&"complete"===r.status&&i===r.station){for(d in r.data)r.data.hasOwnProperty(d)&&M({data:e,param:d,val:r.data[d]});if(Ca?x(e,Ca[t.service]):x(e,Oa),"true"===M({data:e,param:"nol_disabled"}))return;e.serviceFlag[t.service].need&&(M({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[t.service].need=!1,O(M({data:e,param:"nol_queueTime"}),e))}else a._listeners.fireEvent(t.evntCB,t),window.setTimeout(function(){V(e,t)},1e3)}function D(a,e,t){var n={},r,i=0,d;if(M({data:a,param:"nol_playerId"})===e.target.nol_playerId){for(d in e.target)e.target.hasOwnProperty(d)&&(M({data:a,param:d,val:e.target[d]}),n[d]=e.target[d]);var s=Va.findPlayer(a);if(s){var l="undefined"!=typeof s.oServiceCall[t.service]&&s.oServiceCall[t.service].hasOwnProperty("status")?s.oServiceCall[t.service].status:"undefined";s.oServiceCall[t.service]={status:"complete",prevStatus:l,station:t.key,data:n},s.serviceSending[t.service]=!1}if(Ca?x(a,Ca[t.service]):x(a,Oa),"true"===M({data:a,param:"nol_disabled"}))return;a.serviceFlag[t.service].need&&(M({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[t.service].need=!1,e.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===M({data:a,param:"nol_cadence"})&&(i=o(e.target.nol_fdTimeCode,"num"),r=o(M({data:a,param:"nol_queueTime"}),"num"),M({data:a,param:"nol_queueTime",val:r+i})),O(M({data:a,param:"nol_queueTime"}),a))}}function R(a){return"id3"===M({data:a,param:"nol_product"})&&M({data:a,param:"nol_id3Data"})?void S(a):void("true"!==M({data:a,param:"nol_disabled"})&&"1"===M({data:a,param:"nol_davState"})&&(M({data:a,param:"nol_davState",val:"2"}),"daypart"===M({data:a,param:"nol_cadence"})?S(a,{save:!0}):S(a),w(a),M({data:a,param:"nol_disabled",val:"true"})))}function F(a){"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"!==M({data:a,param:"nol_cadence"})||("content"===M({data:a,param:"nol_ac"})&&M({data:a,param:"nol_segmentTimeSpent"})>0||"streamduration"===M({data:a,param:"nol_cadence"})&&M({data:a,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"===M({data:a,param:"nol_cadence"})||"postroll"===M({data:a,param:"nol_vidtype"})&&"interval"===M({data:a,param:"nol_cadence"}))&&("content"===M({data:a,param:"nol_ac"})?S(a,{save:!0}):S(a),M({data:a,param:"nolPriv_now",val:0}))}function N(e,t){var n=null,r=xa();try{e&&Ma.isEnabled(e)&&(n=Da.inferEvent(t.currEvtType,e,t._param1,r,t._param3),n&&(n.event!==Da.events.play&&Va.state.set(e,n),Ma.preProcess(e,n)))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:n,timestamp:r}}function j(e,t){try{e&&t.inferredEvent&&(t.inferredEvent.event===Da.events.play&&Va.state.set(e,t.inferredEvent),Ma.postProcess(e,t.inferredEvent))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function B(e){try{var t=M({data:e,param:"nol_playerId"});ca&&ca.hasOwnProperty(t)&&(!ca[t].hasOwnProperty("nol_sessionId")||ca[t].hasOwnProperty("forceStreamRegen")&&ca[t].forceStreamRegen===!0)&&(ca[t].nol_sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var e=16*Math.random()|0,t="x"==a?e:3&e|8;return t.toString(16)}),ca[t].forceStreamRegen=!1)}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function U(e,t){var n=M({data:e,param:"nol_playerId"});if(n===t.id){var r=t.evtInfo,d=r.param1,s=r.param3||d.param3||d,l,p,c,m,u=o(M({data:e,param:"nolPriv_id3Count"}),"num"),v,_,g,y=M({data:e,param:"nol_segmentSpentViewing"}),h=M({data:e,param:"nol_enableFilterMap"}),T="|mtvr|,|dprid3|,|id3|",P,w,b={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},C,k,I,A=M({data:e,param:"nol_prod"}),D,U={},Q=r.eventType.toString(),W,J="content",z,Y,K,X=M({data:e,param:"nolPriv_serverTimeOffset"}),Z=ba.nol_vidtype?ba.nol_vidtype.clientField:"nol_vidtype",$=ba.nol_tagSrc?ba.nol_tagSrc.clientField:"nol_tagSrc",aa=ba.nol_assetid?ba.nol_assetid.clientField:"nol_assetid",ea=ba.nol_ac?ba.nol_ac.clientField:"nol_ac",ta=ba.nol_linearAdLoadFlag?ba.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",na=s[Z]?s[Z].toString().toLowerCase():"",ra=Math.round(xa()/1e3),oa="nol_assetid",ia=Va.findPlayer(e),da=N(e,{currEvtType:Q,_param1:d,_param3:s});switch(Q.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===Q||"staticstart"===Q)&&"dcrstatic"!==M({data:e,param:"nol_product"}))return;if("14"!==Q&&"staticstart"!==Q&&"dcrstatic"===M({data:e,param:"nol_product"}))return;var sa=","+M({data:e,param:"nol_contentType"});e._currVidType=na&&sa.indexOf(","+na)!==-1?"content":"dcrstatic"===M({data:e,param:"nol_product"})?"static":"ad";var la=null,pa=null;if(("ad"===M({data:e,param:"nol_ac"})&&M({data:e,param:"nol_segmentTimeSpent"})>0&&"streamduration"===M({data:e,param:"nol_cadence"})||"stream"===M({data:e,param:"nol_cadence"})&&"dcrstatic"===M({data:e,param:"nol_product"})||"dcrstatic"===M({data:e,param:"nol_product"})&&String(e._currAssetid)!==String(s[aa]))&&R(e),M({data:e,param:"nol_onCompleteFired"})===!0?("content"!==e._currVidType&&"static"!==e._currVidType||("content"===e._currVidType.toLowerCase()&&ca[n].hasOwnProperty("forceStreamRegen")&&ca[n].forceStreamRegen===!0&&B(e),M({data:e,param:oa,val:-1}),"content"===e._currVidType?(la=Va.state.clone(e),pa=Ma.clone(e),G(e)):G(e,!0)),M({data:e,param:"nol_onCompleteFired",val:!1})):"14"!==Q&&"staticstart"!==Q||"stream"!==M({data:e,param:"nol_cadence"})||(M({data:e,param:oa,val:-1}),G(e)),"ad"===e._currVidType){var ma=i(M({data:e,param:"nol_segmentLength"}));M({data:e,param:"nol_minutes",val:ma}),M({data:e,param:oa,val:-1}),M({data:e,param:Z,val:na})}if(e._currAssetid="daypart"===M({data:e,param:"nol_cadence"})||"stream"!==M({data:e,param:"nol_cadence"})&&"dcrstatic"===M({data:e,param:"nol_product"})?s[aa]:e._currAssetid,s.nol_ac=e._currVidType,o(M({data:e,param:"nol_serverTime"}),"num")+86400<Math.round(xa()/1e3)+X)return R(e),void L(t,M({data:e,param:"nol_playerId"}));for(W=0,z=h.length;W<z;W+=1)l=ba[h[W]]?ba[h[W]].clientField:h[W],U[h[W]]=String(s[l]||"");if(v=s.hasOwnProperty(aa)?String(s[aa]):M({data:e,param:"nolPriv_assetid"}),x(e,Oa.onCmsDetected,U),"false"!==U.nol_disabled||!s)return void("cms"!==e._currTagSrc&&(H(e,"loadMetadata",s),M({data:e,param:"nol_disabled",val:"true"})));if("static"===e._currVidType&&"dcrstatic"===M({data:e,param:"nol_product"})?(a._listeners.fireEvent("updateCmbStaticPage",{evtInfo:r,plid:n}),J="static"):J="content",v!==M({data:e,param:oa})){if("ad"!==M({data:e,param:"nol_ac"})&&R(e),H(e,"loadMetadata",s),M({data:e,param:"nolPriv_assetid",val:M({data:e,param:oa})}),"15"!==Q&&"loadmetadata"!==Q||"id3"!==M({data:e,param:$,vidType:"content"})||M({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})!==!1||M({data:e,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),x(e,Oa.onAssetIdChanged),"true"===M({data:e,param:"nol_disabled"}))return;if("drm"===M({data:e,param:"nol_product"}))e.serviceFlag.stn.need=!0;else if(e.serviceFlag.stn.need=!1,"true"===M({data:e,param:"nol_disabled"}))return;if(x(e,Oa.onComplete),la&&Va.state.bind(e,la),pa&&Ma.bind(e,pa),"true"===M({data:e,param:"nol_disabled"}))return}if("ad"===e._currVidType&&"dcrvideo"===M({data:e,param:"nol_product"})&&"impression"!==M({data:e,param:"nol_cadence"})){var ua=M({data:e,param:"nol_timeSpentViewing"});ua[e._currVidType].nol_count++}M({data:e,param:"nol_pingStartTimeUTC",val:Math.round(xa()/1e3)}),A.indexOf("iag")!==-1&&E(e,e._currVidType,ba),("ad"===e._currVidType&&"dcrvideo"!==M({data:e,param:"nol_product"})||"stream"===M({data:e,param:"nol_cadence"}))&&(M({data:e,param:"nol_pingCount",val:0}),M({data:e,param:"nolPriv_sendData",val:!0}),M({data:e,param:"nol_davState",val:"0"}),e.serviceFlag.stn.need||"content"===e._currVidType||"nol_cmsoffset"!==M({data:e,param:"nol_timer"})&&"nol_pageoffset"!==M({data:e,param:"nol_timer"})||O(0,e)),"14"!==Q&&"staticstart"!==Q||"dcrstatic"!==M({data:e,param:"nol_product"})||ia.static.started===!0||(a.PLDCR.start(!0),ia.static.started=!0);break;case"5":case"play":if("mtvr"===M({data:e,param:"nol_product"})){if(I=ba.nol_channelName?ba.nol_channelName.clientField:"nol_channelName",s[I]&&s[I].length>0)for(Y in s)s.hasOwnProperty(Y)&&M({data:e,param:Y,val:s[Y]})}else"dcrvideo"===M({data:e,param:"nol_product"})&&(e._currVidType="content",U={nol_vidtype:M({data:e,param:Z,vidType:e._currVidType}),nol_tagSrc:M({data:e,param:$,vidType:e._currVidType}),nol_linearAdLoadFlag:M({data:e,param:ta,vidType:e._currVidType}),nol_ac:M({data:e,param:ea,vidType:e._currVidType})},x(e,Oa.onCmsDetected,U));break;case"6":case"pause":F(e);break;case"7":case"stop":"ad"===M({data:e,param:"nol_ac"})&&"dcrvideo"===M({data:e,param:"nol_product"})&&"streamduration"===M({data:e,param:"nol_cadence"})&&Oa.onEndDetected&&x(e,Oa.onEndDetected),F(e);break;case"updateott":if(F(e),d&&d.hasOwnProperty("ottStatus")&&d.ottStatus.length>0){for(var oa in d)d.hasOwnProperty(oa)&&(M({data:e,param:oa,val:d[oa],vidType:"content"}),ia.ottStatusObj[oa]=d[oa]);Oa.onOTTDetected&&x(e,Oa.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===Q||"staticend"===Q)&&"dcrstatic"!==M({data:e,param:"nol_product"}))return;if("56"!==Q&&"staticend"!==Q&&"dcrstatic"===M({data:e,param:"nol_product"}))return;if(!("57"!==Q&&"onComplete"!==Q||"mtvr"!==M({data:e,param:"nol_product"})&&"id3"!==M({data:e,param:$,vidType:"content"})||M({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})===!0))return;"ad"===e._currVidType&&("streamduration"===M({data:e,param:"nol_cadence"})?S(e):"dcrvideo"===M({data:e,param:"nol_product"})&&"interval"===M({data:e,param:"nol_cadence"})&&(""===M({data:e,param:"nol_dataDate",vidType:"content"})&&""!==M({data:e,param:"nol_dataDate"})&&(M({data:e,param:"nol_dataDate",val:M({data:e,param:"nol_dataDate"}),vidType:"content"}),M({data:e,param:"nol_hourCode",val:M({data:e,param:"nol_hourCode"}),vidType:"content"}),M({data:e,param:"nol_dayId",val:M({data:e,param:"nol_dayId"}),vidType:"content"})),e._currVidType="content",Oa.onEndDetected&&x(e,Oa.onEndDetected),S(e))),"static"!==M({data:e,param:"nol_ac"})&&(e._currVidType="content"),Oa.onEndDetected&&x(e,Oa.onEndDetected),M({data:e,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==M({data:e,param:"nol_disabled"})&&"id3"!==M({data:e,param:"nol_product"})||("static"===M({data:e,param:"nol_ac"})&&a._listeners.fireEvent("removeCmbAssetId",r),R(e)),M({data:e,param:"nol_onCompleteFired",val:!0}),ca[n].forceStreamRegen=!0,"56"!=Q&&"staticend"!=Q||"dcrstatic"!==M({data:e,param:"nol_product"})||(a.PLDCR.stop(),ia.static.started=!1),"57"!==Q&&"onComplete"!==Q||M({data:e,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"});break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===M({data:e,param:"nol_disabled"})||!d||"nol_pageoffset"!==M({data:e,param:"nol_timer"}))return;"1"===M({data:e,param:"nol_onPaginateFired_static"})&&(M({data:e,param:"nol_onPaginateFired",
val:"0",vidType:"static"}),"impression"!==M({data:e,param:"nol_cadence"})&&q(e,{vidType:"static"})),K=o(M({data:e,param:"nol_highWM"}),"num"),K<o(d,"num")&&M({data:e,param:"nol_highWM",val:d}),O(d,e),M({data:e,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(d>-1){if(M({data:e,param:"nol_onCompleteFired"})===!0&&a._listeners.fireEvent("flushPauseEventQueue"),"true"===M({data:e,param:"nol_disabled"})||!d||"nol_cmsoffset"!==M({data:e,param:"nol_timer"})||"ad"===e._currVidType&&"dcrvideo"===M({data:e,param:"nol_product"})&&"impression"===M({data:e,param:"nol_cadence"}))return;if("number"!=typeof d){if("string"!=typeof d)return;d=o(d,"num")}M({data:e,param:"nol_isLive",val:(d>86400).toString()}),K=o(M({data:e,param:"nol_highWM"}),"num"),K<d&&M({data:e,param:"nol_highWM",val:d}),e.serviceFlag.stn.need?(M({data:e,param:"nol_queueTime",val:d}),V(e,{service:"stn",key:M({data:e,param:"nol_assetid"}),url:M({data:e,param:"nol_stationURL"}),nol_playerId:M({data:e,param:"nol_playerId"})})):O(d,e),M({data:e,param:"nol_davState",val:"1"})}else t.timeStamp&&!Aa[t.timeStamp]&&(f(e,{type:15,msg:"A negative playhead position was sent and will be ignored."}),Aa[t.timeStamp]=!0),a._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."});break;case"55":case"sendid3":if(("object"==typeof d&&Object.keys(d).length>0||"string"==typeof d&&d.length>0)&&(M({data:e,param:"nol_onCompleteFired"})===!0&&ia&&ia.getPauseQueueCount&&ia.getPauseQueueCount()>0?a._listeners.fireEvent("flushPauseEventQueue"):M({data:e,param:"nol_onCompleteFired"})===!0&&ia&&!ia.getPauseQueueCount&&a._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof d))for(z=0;z<d.length;z+=1)if(d[z].key&&"PRIV"===d[z].key){d=d[z].info;break}if(w=d.toString(),P=w.split("/"),d={},P.length<o(La.nol_breakout,"num"))return;for(Y in La)La.hasOwnProperty(Y)&&(d[Y]=P[La[Y]],"nol_breakout"===Y&&(d[Y]=P[o(La[Y],"num")].substr(0,2)),U[Y]=d[Y]);if(!d||M({data:e,param:"nol_tsvBreakoutMap"})&&M({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)===-1||d.nol_nWebAddress.indexOf("nielsen.com")===-1||d.nol_fdcid===M({data:e,param:"nol_cidNull"})&&d.nol_pccid===M({data:e,param:"nol_cidNull"}))return;for(e._currVidType="content",W=0,z=h.length;W<z;W+=1)l=ba[h[W]]?ba[h[W]].clientField:h[W],U[h[W]]=d[l]||M({data:e,param:h[W]});if(U.nol_vidtype="content",x(e,Oa.onId3Detected,U),"false"!==U.nol_disabled||"nol_cmsoffset"===M({data:e,param:"nol_timer"}))return;if("daypart"===M({data:e,param:"nol_cadence"})){var va=M({data:e,param:"nol_assetid"});!va&&d.nol_fdcid&&d.nol_fdcid!==M({data:e,param:"nol_cidNull"})?e._currAssetid=d.nol_fdcid:!e._currAssetid&&va&&(e._currAssetid=va)}if(d.nol_ac=e._currVidType,d.nol_assetid=M({data:e,param:"nol_assetid"})||e._currAssetid,u>0&&(M({data:e,param:"nol_product"}).indexOf("id3")!==-1||M({data:e,param:"nol_product"}).indexOf("mtvr")!==-1)&&(d.nol_pccid!==M({data:e,param:"nol_cidNull"})&&d.nol_pccid!==M({data:e,param:"nol_pccid"})||d.nol_fdcid!==M({data:e,param:"nol_cidNull"})&&d.nol_fdcid!==M({data:e,param:"nol_fdcid"}))&&S(e),!M({data:e,param:"nol_subTag"})&&"id3"!==M({data:e,param:"nol_product"})||d.nol_pccid===M({data:e,param:"nol_cidNull"})||d.nol_pccid===M({data:e,param:"nol_pccid"})||(b.filters.onId3PcCidChanged=!0,b.count+=1),M({data:e,param:"nol_subTag"})||d.nol_fdcid===M({data:e,param:"nol_cidNull"})||d.nol_fdcid===M({data:e,param:"nol_fdcid"})||(b.filters.onId3FdCidChanged=!0,b.count+=1),b.count){if(H(e,"sendID3",d),!b.filters.onId3FdCidChanged&&M({data:e,param:"nol_fdcid"})!=M({data:e,param:"nol_cidNull"})||M({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(d.nol_breakout)===-1||(e.serviceFlag.tsv.need=!0),b.count>0)for(Y in b.filters)if(b.filters[Y]&&(x(e,Oa[Y]),"true"===M({data:e,param:"nol_disabled"})))return;if(Oa.onComplete&&(x(e,Oa.onComplete),"true"===M({data:e,param:"nol_disabled"})))return}else for(Y in d)d.hasOwnProperty(Y)&&M({data:e,param:Y,val:d[Y]});if(M({data:e,param:"nol_id3Raw",val:w}),e.serviceFlag.tsv.need&&T.indexOf("|"+M({data:e,param:"nol_product"})+"|")!==-1&&(k=M(b.filters.onId3PcCidChanged===!0?{data:e,param:"nol_pccid"}:{data:e,param:"nol_fdcid"}),V(e,{service:"tsv",key:k,url:M({data:e,param:"nol_tsvURL"})})),"id3"===M({data:e,param:"nol_product"})&&d.nol_watermark&&String(d.nol_watermark).length>0)return _=M({data:e,param:"nol_id3Data"}),g=Math.round(xa()/1e3+X),D=M({data:e,param:"nol_id3Seq"})||0,_?M({data:e,param:"nol_id3Data",val:_+="|"+g+","+M({data:e,param:"nol_id3Raw"})}):(M({data:e,param:"nol_id3Data",val:D+":"+M({data:e,param:"nol_clocksrc"})+":"+M({data:e,param:"nol_tsvFlag"})+":"+g+","+M({data:e,param:"nol_id3Raw"})}),M({data:e,param:"nol_id3Seq",val:o(D,"num")+1,vidType:"content"})),u>0&&S(e,{returnLength:!0}),u+=1,M({data:e,param:"nolPriv_id3Count",val:u}),void M({data:e,param:"nol_davState",val:"1"});if(u+=1,M({data:e,param:"nolPriv_id3Count",val:u}),C=M({data:e,param:M({data:e,param:"nol_timer"})})||M({data:e,param:"nol_fdoffset"}),"daypart"===M({data:e,param:"nol_cadence"})&&(C=o(C,"num"),C+="nol_pcoffset"==M({data:e,param:"nol_timer"})?o(M({data:e,param:"nol_pcTimeCode"}),"num"):o(M({data:e,param:"nol_fdTimeCode"}),"num")),e.serviceFlag.tsv.need)M({data:e,param:"nol_queueTime",val:C});else{if("true"===M({data:e,param:"nol_disabled"}))return;O(C,e),M({data:e,param:"nol_davState",val:"1"})}break;case"60":case"mute":break;case"30":case"onpaginate":"dcrstatic"===M({data:e,param:"nol_product"})&&Oa.onPaginateDetected&&"stream"!==M({data:e,param:"nol_cadence"})&&x(e,Oa.onPaginateDetected),M({data:e,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":Va.updateMetadata(e,s,ba)}j(e,da)}}function Q(a){var e,t=null,n="content"==a._currVidType?o(M({data:a,param:"nol_chnlCountThrshld"}),"num")||da:o(M({data:a,param:"nol_staticCountThrshld"}),"num")||da,r=a._dataArrObj[a._currVidType],i,d=0,s=a._dataArrObj.count;if(!a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){if(s[a._currVidType]>=n){for(i in r)if(r.hasOwnProperty(i)){if(d=r[i].nolPriv_priority,d<=0){e=i;break}(null===t||t>d)&&(t=d,e=i)}r.hasOwnProperty(e)&&(delete r[e],s[a._currVidType]-=1)}a._dataArrObj[a._currVidType][a._currAssetid]={nolPriv_priority:0},s[a._currVidType]+=1}}function G(a,e){"undefined"!=typeof e&&e===!0&&(a._dataArrObj.static={}),a._dataArrObj.ad={},a._dataArrObj.content={},a._dataArrObj.count={content:0,ad:0,static:0},a._currAssetid="0"}function W(e){try{var t=M({data:e,param:"nol_playerId"});if(t&&a._players&&a._players.hasOwnProperty(t)){var n=a._players[t];if(n&&Object.keys(n.ottStatusObj).length>0){var r;for(r in n.ottStatusObj)M({data:e,param:r,val:n.ottStatusObj[r],vidType:"content"})}}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function q(e,t){try{if("1"===M({data:e,param:"nol_unifiedEnabled"})){var n=t&&t.hasOwnProperty("vidType")?t.vidType:e._currVidType.toLowerCase(),r=o(M({data:e,param:"nol_viewCount_"+n}),"num");M({data:e,param:"nol_viewCount_"+n,val:r+=1}),"1"===M({data:e,param:"nol_applyViewInc"})&&M({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function H(a,e,t){var n="",r,o,i="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count",d=M({data:a,param:{}}),s,l,p=M({data:a,param:"nol_playerId"});if(Q(a),"ad"===a._currVidType.toLowerCase()&&(n="st,a",M({data:a,param:"nol_currSeg",val:"0"})),""===M({data:a,param:"nol_errorURL"})&&M({data:a,param:"nol_errorURL",val:ta+ea+ra+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===e)for(r in d)d.hasOwnProperty(r)&&i.indexOf(r)===-1&&M({data:a,param:r,val:A({data:a,param:r})||""});for(r in t)t.hasOwnProperty(r)&&M({data:a,param:String(r),val:String(t[r])});M({data:a,param:"nolPriv_sendData",val:!0}),M({data:a,param:"nol_davState",val:"0"}),M({data:a,param:"nol_highWM",val:"0"}),M({data:a,param:"nol_iagData",val:""}),M({data:a,param:"nol_disabled",val:"false"}),M({data:a,param:"nol_sendQual",val:A({data:a,param:"nol_sendQual"})||""}),M({data:a,param:"nolPriv_assetid",val:""}),M({data:a,param:"nol_c3"})||M({data:a,param:"nol_c3",val:n}),"content"===a._currVidType.toLowerCase()&&B(a),M({data:a,param:"nol_applyViewInc",val:"1"}),(!M({data:a,param:"nol_minutes"})||"daypart"!==M({data:a,param:"nol_cadence"})&&"dcrstatic"!==M({data:a,param:"nol_product"})||"dcrstatic"===M({data:a,param:"nol_product"})&&"stream"===M({data:a,param:"nol_cadence"}))&&(w(a),M({data:a,param:"nol_pingCount",val:0})),W(a)}function J(e,t){var n=e.playerId,o=ca[n].nol_tagMap.nol_url,i,d,s,l=0,p=o?o[e.nol_url]||e.nol_url||"":e.nol_url||"",m={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},u={ad:{},content:{},static:{},count:{content:0,static:0}},v={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:window.location.href,nol_sendTime:"0",nol_pageURL:window.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:window.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0"},_=e,f={_dataArrObj:u,_settings:_,_currVidType:"ad",_currAssetid:"0",serviceFlag:m};a._listeners.addListener("tick",function(){if(t.pauseObj.eventPauseTime>=t.pauseObj.cmsPauseTime&&Va.state.status.current(f)!==Va.states.stopped&&Va.state.status.current(f)!==Va.states.paused&&Ma.isEnabled(f)){var e={event:Da.events.pause,curPos:Va.state.position.current(f),prevPos:null,timestamp:Va.state.timeStamp.current(f)};Va.state.set(f,e),Ma.preProcess(f,e),t.pauseObj.eventPauseTime=0}t.pauseObj.pauseTime>t.pauseObj.maxPauseTime&&"dcrstatic"!==M({data:f,param:"nol_product"})&&(t.pauseObj.pauseTime=0,a._listeners.fireEvent("handleSessionReset",{plid:n,passedFdata:f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),G(f);for(s in v)e.hasOwnProperty(s)?_[s]=e[s]:_[s]=ca[_.playerId][s]||v[s];if(_.nol_customExtension&&p){for(i=0,d=_.nol_customExtension.length;i<d;i+=1)p=p.replace("|!["+_.nol_customExtension[i]+"]!|",ca[_.playerId][_.nol_customExtension[i]]||"");_.nol_url=p}if("true"!==M({data:f,param:"nol_fireStop"})&&"interval,episode,streamduration".indexOf(M({data:f,param:"nol_cadence"}))===-1||r("pagehide||beforeunload",function(a){ga&&(window.clearInterval(ga),ga=0,c({serverTimeOffset:M({data:f,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:M({data:f,param:"nol_rfrmsk"})})),"sendBeacon"in navigator&&(ka=!0),M({data:f,param:"nol_forceFireOnClose_content",val:"1"}),Oa.onEndDetected&&x(f,Oa.onEndDetected),Ma.setNextTick(f,null,"content"),R(f)}),this.eventListener=function(a){U(f,a)},ca[n].eventQueue.length>l)for(i=0;i<ca[n].eventQueue.length;i+=1)ca[n]&&ca[n].eventQueue&&(ca[n].eventQueue[i].timeStamp="queued"+i),U(f,ca[n].eventQueue[i]),l=i}function z(e){e&&e.hasOwnProperty("configReq")&&e.hasOwnProperty("player")&&e.configReq.length>0&&"undefined"!=typeof e.player?(s(e.configReq),window.clearInterval(e.player.lsPopulatedInterval),e.player.lsPopulatedInterval=0):a._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}var Y=a.PLDPR=a.PLDPR||{},K=window.NOLCMB,X=K.sdkvForConfig?K.sdkvForConfig():"bj.5.0.0",Z="5.0.0",$="65",aa=a.getBaseBuildVer?a.getBaseBuildVer()+$:Z+$,ea="cgi-bin/",ta=K.getConfigAddress(),na="cfg",ra="error",oa=a.getLS(),ia=a.getConfigVer?a.getConfigVer():300,da=5,sa={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},la={regex:/\|\![\w\W]*?(\!\|)/g,length:2},pa=/[\[\{<\(\}\]>\)]/g,ca=Y.dataObj||{},ma=0,ua=0,va=5,_a=5,fa=[],ga,ya=2,ha=!1,Ta=[],Pa="false",Sa=Pa,wa,ba={},Oa={},Ca={},Ea=!1,ka=!1,La,Ia={send:function(t,n){var r=t,o=r.url.indexOf("&c62=")!==-1?e(r.url,"c62=")+"&c62=sendTime,"+("undefined"!=typeof n?n:xa()/1e3>>0):r.url,i=this,d=e(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),s=ka?{onerror:{},onload:{}}:new Image;s.onerror=function(a){i.onError(a,r)},s.onload=function(a){},a.postMsgAvail&&r.hasOwnProperty("maskRefUrl")&&r.maskRefUrl!==-1&&"true"===r.maskRefUrl?Ra.sendMaskedPing(d):ka?navigator.sendBeacon(d):s.src=d},setup:function(a){var e=this,t=a.hasOwnProperty("url")?a.url:"",n=a.params||{url:t,errorDelay:1e3*(a.delay||_a),retry:0,maskRefUrl:a.hasOwnProperty("maskRefUrl")&&String(a.maskRefUrl).length>0?a.maskRefUrl:-1};t&&t.length>0&&e.send(n,a.pingSendTime)},onError:function(a,e){var t=this,n=a.target.src;e&&e.retry<va&&n&&n.length>0&&(e.retry+=1,e.url=n,window.setTimeout(function(){t.send(e)},e.errorDelay))}},xa=K.getTIme||function(){return(new Date).getTime()},Aa={},Ma=function(){var a="nol_eventData",e="nol_eventDataDelimiter",t="nol_eventDataEvents",n="nol_eventDataEnabled",r=":",o={delimiter:"",eventsList:[]},i=function(){var a={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}};return a}(),d={get:function(e,t){var n="";return e&&(n=M({data:e,param:a,vidType:t||e._currVidType})),n},set:function(e,t,n){return e&&M({data:e,param:a,val:t,vidType:n||e._currVidType}),e},clear:function(e){e&&(M({data:e,param:a,val:"",vidType:"ad"}),M({data:e,param:a,val:"",vidType:"content"}))},clone:function(a){try{return{content:d.get(a,"content"),ad:d.get(a,"ad")}}catch(a){return null}},bind:function(a,e){try{if(a&&e)for(var t in e)d.set(a,e[t],t)}catch(a){}},append:function(a,e){if(a&&e){var t=d.get(a),n=d.delimiter(a),r=d.parseEventData(e);d.set(a,t?[t,r].join(n):r)}},delimiter:function(a){return a?(o.delimiter||(o.delimiter=M({data:a,param:e})),o.delimiter):""},isEnabled:function(a){return!!a&&"true"===M({data:a,param:n})},isEventEnabled:function(a,e){if(e&&a){var t=d.lookupEvent(a.toLowerCase());if(t)return d.eventsList(e).indexOf(t.name)>-1}return!1},eventsList:function(a){if(a){if(!o.eventsList||0==o.eventsList.length){var e=M({data:a,param:t});e&&(o.eventsList=e.split(","))}return o.eventsList}},clearCache:function(){o.delimiter="",o.eventsList=[]},lookupEvent:function(a){return a?i[a.toLowerCase()]:null},parseEventData:function(a){var e="";if(a){var t=d.lookupEvent(a.event);if(t){var n=[t.abbrv,a.timestamp,a.curPos];void 0!==a.prevPos&&null!==a.prevPos&&a.curPos!=a.prevPos&&n.push(a.prevPos),void 0!==a.p1&&null!==a.p1&&n.push(a.p1),e=n.join(r)}}return e},handleEvent:function(a,e){a&&e&&d.isEventEnabled(e.event,a)&&d.append(a,e)},setNextTick:function(a,e,t){var n=d.get(a,t);if(n&&n.indexOf("{{nextTick}}")>-1)if(e&&e.event===Da.events.playhead)a=d.set(a,n.replace(/{{nextTick}}/gi,1==e.curPos?"0":e.curPos),t);else{var r=Va.state.position.current(a,t)||"0";a=d.set(a,n.replace(/{{nextTick}}/gi,r),t)}return a},preProcess:function(a,e){try{a&&e&&e.event&&e.event!==Da.events.play&&e.event.indexOf("event_")===-1&&(d.setNextTick(a,e),e.event===Da.events.stop&&"content"!==Va.type.current(a)&&d.setNextTick(a,e,"content"),d.handleEvent(a,e))}catch(a){}},postProcess:function(a,e){try{a&&e&&e.event&&e.event===Da.events.play&&d.handleEvent(a,e)}catch(a){}}};return{get:d.get,set:d.set,clone:d.clone,bind:d.bind,clear:d.clear,append:d.append,isEnabled:d.isEnabled,isEventEnabled:d.isEventEnabled,preProcess:d.preProcess,postProcess:d.postProcess,setNextTick:d.setNextTick}}(),Va={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return a._players[e];var t=M({data:e,param:"playerId"});return Va.findPlayer(t)}return null},currentPosition:function(a){return o(M({data:a,param:Va._keys.currentPosition}),"num")},currentTimestamp:function(a){return o(M({data:a,param:Va._keys.currentTimestamp}),"num")},asset:{current:function(a){return a?a._currAssetid:null},parse:function(a){var e=ba.nol_assetid?ba.nol_assetid.clientField:"nol_assetid";return a?a[e]:null}},type:{isCurrentlyContent:function(a){return"content"===a._currVidType},isCurrentlyAd:function(a){return"ad"===a._currVidType},isCurrentlyStatic:function(a){return"static"===a._currVidType},current:function(a){return a._currVidType},parse:function(a,e){var t=ba.nol_vidtype?ba.nol_vidtype.clientField:"nol_vidtype",n=e[t]?e[t].toString().toLowerCase():"",r=","+M({data:a,param:"nol_contentType"});return n&&r.indexOf(","+n)!==-1?"content":"dcrstatic"===M({data:a,param:"nol_product"})?"static":"ad"}},tagName:function(a,e){return M({data:a,param:Va._keys.tagName,vidType:e||a._currVidType})},localTimer:function(a,e){return M({data:a,param:Va._keys.localTimer,vidType:e||a._currVidType})||"nol_fdoffset"},isInitialized:function(a,e){try{return e=e||a._currVidType,"{}"!==JSON.stringify(a._dataArrObj[e])}catch(a){return!1}},updateMetadata:function(e,t,n){try{var r={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype"]},o=function(a){var e=!0;for(var t in r.nolParams)if(n&&n.hasOwnProperty(r.nolParams[t])&&a===n[r.nolParams[t]].clientField){e=!1;break}return e};if(!e||!t)return;var i="undefined"!=typeof n&&"object"==typeof n&&n;for(var d in t)t.hasOwnProperty(d)&&(i&&o(d)?M({data:e,param:String(d),val:String(t[d])}):a._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+d+" is not allowed. Please remove "+d+" from your metadata parameter."}))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},state:{position:{current:function(a,e){return o(M({data:a,param:Va._keys.stateCurrentPosition,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(M({data:a,param:Va._keys.statePreviousPosition,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var n=Va.state.position.current(a);M({data:a,param:Va._keys.statePreviousPosition,val:n,vidType:t||a._currVidType}),M({data:a,param:Va._keys.stateCurrentPosition,val:e,vidType:t||a._currVidType})}},timeStamp:{current:function(a,e){return o(M({data:a,param:Va._keys.stateCurrentTimestamp,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(M({data:a,param:Va._keys.statePreviousTimestamp,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var n=Va.state.timeStamp.current(a);M({data:a,param:Va._keys.statePreviousTimestamp,val:n,vidType:t||a._currVidType}),M({data:a,param:Va._keys.stateCurrentTimestamp,val:e,vidType:t||a._currVidType})}},asset:{current:function(a,e){return M({data:a,param:Va._keys.stateCurrentAsset,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Va._keys.statePreviousAsset,vidType:e||a._currVidType})},set:function(a,e,t){var n=Va.state.asset.current(a);M({data:a,param:Va._keys.statePreviousAsset,val:n,vidType:t||a._currVidType}),M({data:a,param:Va._keys.stateCurrentAsset,val:e,vidType:t||a._currVidType})}},status:{current:function(a,e){return M({data:a,param:Va._keys.stateCurrentStatus,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Va._keys.statePreviousStatus,vidType:e||a._currVidType})},set:function(a,e,t){var n=Va.state.status.current(a,t);M({data:a,param:Va._keys.statePreviousStatus,val:n,vidType:t||a._currVidType}),M({data:a,param:Va._keys.stateCurrentStatus,val:e,vidType:t||a._currVidType})}},type:{current:function(a,e){return M({data:a,param:Va._keys.stateCurrentType,vidType:e||a._currVidType})},previous:function(a,e){return M({data:a,param:Va._keys.statePreviousType,vidType:e||a._currVidType})},set:function(a,e,t){var n=Va.state.type.current(a,t);M({data:a,param:Va._keys.statePreviousType,val:n,vidType:t||a._currVidType}),M({data:a,param:Va._keys.stateCurrentType,val:e,vidType:t||a._currVidType})}},set:function(a,e){var t=Va.findPlayer(a);switch(e.event){case"LOAD":Va.state.asset.set(a,e.assetId),Va.state.type.set(a,e.contentType),Va.state.timeStamp.set(a,e.timestamp);break;case"PLAY":case"RESUME":Va.state.status.set(a,Va.states.playing),Va.state.asset.set(a,e.assetId),Va.state.type.set(a,e.contentType),Va.state.timeStamp.set(a,e.timestamp),"PLAY"===e.event&&Va.state.position.set(a,0),"RESUME"===e.event&&void 0!=e.currentPos&&null!=e.currentPos&&"{{nextTick}}"!=e.currentPos&&(Va.state.position.set(a,e.curPos),Va.state.timeStamp.set(a,e.timestamp)),t.pauseObj.eventPauseTime=0;break;case"PAUSE":Va.state.status.set(a,Va.states.paused);break;case"STOP":Va.state.resetAsset(a),Va.state.status.set(a,Va.states.stopped);break;case"PLAYHEAD":Va.state.position.set(a,e.curPos),Va.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Va.state.position.set(a,e.curPos),Va.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":t.pauseObj.eventPauseTime=0}},get:function(a,e){try{if(a){var t={position:{current:Va.state.position.current(a,e),previous:Va.state.position.previous(a,e)},timeStamp:{current:Va.state.timeStamp.current(a,e),previous:Va.state.timeStamp.previous(a,e)},asset:{current:Va.state.asset.current(a,e),previous:Va.state.asset.previous(a,e)},status:{current:Va.state.status.current(a,e),previous:Va.state.status.previous(a,e)},type:{current:Va.state.type.current(a,e),previous:Va.state.type.previous(a,e)}};return t}}catch(a){}return null},resetAsset:function(a){Va.state.position.set(a,null),Va.state.timeStamp.set(a,null),Va.state.asset.set(a,null)},bind:function(a,e){try{if(a&&e)for(var t in e)M({data:a,param:Va._keys.statePreviousPosition,val:e[t].position?e[t].position.previous:null,vidType:t}),M({data:a,param:Va._keys.stateCurrentPosition,val:e[t].position?e[t].position.current:null,vidType:t}),M({data:a,param:Va._keys.statePreviousTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),M({data:a,param:Va._keys.stateCurrentTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),M({data:a,param:Va._keys.statePreviousAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),M({data:a,param:Va._keys.stateCurrentAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),M({data:a,param:Va._keys.statePreviousStatus,val:e[t].status?e[t].status.current:null,vidType:t}),M({data:a,param:Va._keys.stateCurrentStatus,val:e[t].status?e[t].status.current:null,vidType:t}),M({data:a,param:Va._keys.statePreviousType,val:e[t].type?e[t].type.current:null,vidType:t}),M({data:a,param:Va._keys.stateCurrentType,val:e[t].type?e[t].type.current:null,vidType:t})}catch(a){}},clone:function(a){try{return{content:Va.state.get(a,"content"),ad:Va.state.get(a,"ad")}}catch(a){}}}},Da=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},t={checkRewind:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==M({data:a,param:"nol_cadence"})&&"impression"!==M({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),n=Va.state.position.current(a),r=t-n;return{match:r<0,currentPos:t,previousPos:n}}return!1},checkForward:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==M({data:a,param:"nol_cadence"})&&"impression"!==M({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),n=Va.state.position.current(a),r=Va.state.timeStamp.current(a),i=o(M({data:a,param:"nol_cmsIntrvlGp"}),"num")||2,d=Math.ceil((xa()-r)/1e3)||1;if(0==n&&t>86400&&"nol_cmsoffset"===Va.localTimer(a)){var s=xa().toString().substr(0,e.toString().length);s&&(n=parseInt(s))}var l=t-n;return{match:l>i&&l>Math.ceil(1.5*d),currentPos:t,previousPos:n}}return!1}},n={checkRewind:function(a,e){var t=Va.currentPosition(a),n=Va.currentTimestamp(a),r=o(M({data:a,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(a,e){var t=Va.currentPosition(a),n=Va.currentTimestamp(a),r=o(M({data:a,param:"nol_id3IntrvlGp"}),"num");return!1}},r={inferEvent:function(n,r,i,d,s){var l=null;try{if(l={event:"event_"+n,curPos:Va.state.position.current(r),prevPos:null,timestamp:d},n&&r)switch(n.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var p=Va.asset.parse(s),c=Va.state.asset.current(r),m=Va.state.asset.previous(r),u=Va.state.type.current(r),v=Va.type.parse(r,s);if(l.event=e.load,l.assetId=p,l.contentType=v,Va.state.status.current(r,v)==Va.states.paused&&(c==p&&null!==p||u!==v)){l.event=e.resume,l.assetId=p,l.contentType=v,l.curPos="{{nextTick}}";break}if(Va.state.status.current(r,v)!==Va.states.playing&&c!=p||Va.state.status.current(r,v)===Va.states.stopped&&m==p&&null!==p||null===c){l.event=e.play,l.curPos="{{nextTick}}";break}break;case"5":case"play":l.event="event_play";break;case"7":case"stop":l.event="event_stop";break;case"57":case"end":case"oncomplete":l.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(i>-1){var _=t.checkRewind(r,i);if(_.match){l.event=e.rewind,l.curPos=_.currentPos,l.prevPos=_.previousPos,l.p1=l.prevPos-l.curPos;break}if(Ma.get(r).indexOf("{{nextTick}}")===-1){var f=t.checkForward(r,i);if(f.match){l.event=e.forward,l.curPos=f.currentPos,l.prevPos=f.previousPos,l.p1=l.curPos-l.prevPos;break}}if(Va.state.status.current(r)===Va.states.paused){l.event=e.resume,l.assetId=Va.state.asset.current(r),l.contentType=Va.type.current(r),l.curPos=i;break}l.event=e.playhead,l.curPos=i}break;case"55":var g=M({data:r,param:M({data:r,param:"nol_timer"})})||M({data:r,param:"nol_fdoffset"});"daypart"===M({data:r,param:"nol_cadence"})&&(g=o(g,"num"),g+="nol_pcoffset"==M({data:r,param:"nol_timer"})?o(M({data:r,param:"nol_pcTimeCode"}),"num"):o(M({data:r,param:"nol_fdTimeCode"}),"num")),l.event=e.playhead;break;case"9":case"mute":l.event=e.mute,l.p1=i}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+n})}return l}};return{events:e,inferEvent:r.inferEvent}}(),Ra=function(e,t,n){!function(){function a(a,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(a,e.bubbles,e.cancelable,e.detail),t}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}();var r={fireCustomEvent:function(e,t,n){try{n=n||window,e&&n&&n.dispatchEvent(new CustomEvent(e,{detail:t}))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}}},o={sendMaskedPing:function(a,r){e.lsReady()?t.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:a}}),t.src):(r=r||0,r<n.maxRetry&&setTimeout(function(){o.sendMaskedPing(a,r+1)},300))}};return{fireCustomEvent:r.fireCustomEvent,sendMaskedPing:o.sendMaskedPing}}(a,oa,{maxRetry:va}),Fa=["sun","mon","tue","wed","thu","fri","sat"];return Y.initFromConfig=function(e){a._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(e&&e.nol_GLOBALS){var t,n,r=xa(),o,i,s,l,p="localhost",m=e.nol_GLOBALS.debugSfcode||"uat-cert",u=e.nol_GLOBALS.nol_appid||"",v=e.nol_GLOBALS.nol_lsid||"",_=e.nol_GLOBALS.nol_emmURL||"",f=e.nol_GLOBALS.nol_sessionIdUrl||"",g,y,h,T,P,S,w,b;if(""!==f&&Ia.setup({pingSendTime:"undefined",url:f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+a.localStorageId+"; config lsid: "+v}),a._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+a.EMMURL+"; config emm: "+_}),""===_&&""!==v?a.setLsId(v):""!==_&&(""!==v&&a.localStorageId!==v||_!==a.EMMURL)&&(a.setLsId(v,_),a.setEmmUrl(_)),a._listeners.fireEvent("sendOptOutStatus","OPTOUT"==v),void 0!==e.nol_GLOBALS.nol_maxRetry&&null!==e.nol_GLOBALS.nol_maxRetry&&""!==e.nol_GLOBALS.nol_maxRetry){var O=parseInt(e.nol_GLOBALS.nol_maxRetry);O>-1&&(va=O)}if(e&&e.hasOwnProperty("nol_GLOBALS")){var C=e.nol_GLOBALS.nol_playerId||0;if(n=a._players[C],!n)return;p=e.nol_GLOBALS.nol_sfcode||p,n.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(e.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(e.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},b=a.localStorage?ca[C]?ca[C].nol_serverTime||a.localStorage.getItem("nol_serverTime"):a.localStorage.getItem("nol_serverTime")||0:ca[C]?ca[C].nol_serverTime:0,b===e.nol_GLOBALS.nol_serverTime?ma=ca[C]?ca[C].nolPriv_serverTimeOffset:e.nol_GLOBALS.nol_serverTime-Math.round(r/1e3):(ma=e.nol_GLOBALS.nol_serverTime-Math.round(r/1e3),a.localStorage&&a.localStorage.setItem("nol_serverTime",e.nol_GLOBALS.nol_serverTime)),_a=e.nol_GLOBALS.nol_errorWait||_a,t=n.getConfigParams().ggParams||{},ca[C]=d(ca[C]),ca[C].nolPriv_serverTimeOffset=ma,ga&&(window.clearInterval(ga),ga=0),e.nol_GLOBALS.nol_sendTimer&&(ga=window.setInterval(function(){c({serverTimeOffset:ca[C].nolPriv_serverTimeOffset,url:"__sendIt"})},1e3*e.nol_GLOBALS.nol_sendTimer));for(o in t)t.hasOwnProperty(o)&&(ca[C][o]=t[o]);for(o in e.nol_GLOBALS)e.nol_GLOBALS.hasOwnProperty(o)&&(ca[C][o]=e.nol_GLOBALS[o]);Oa=ca[C].nol_eventFilter||{},Ca=ca[C].nol_serviceFilter||{},La=ca[C].nol_id3Map||{};for(o in ca[C].nol_clientCMSmap)ca[C].nol_clientCMSmap.hasOwnProperty(o)&&(y=ca[C].nol_clientCMSmap[o].toString()||"",h=y.replace(pa,""),P=y.match(pa)||[],T={clientField:h.toString(),encoding:P.join("")},ba[o]=T);e.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&K.hasOwnProperty("setTotalNumAssetsAllowed")&&K.setTotalNumAssetsAllowed(e.nol_GLOBALS.nol_maxStaticInstances),n.configLoaded=!0,ca[C].nol_lstrg="",v&&"999"!==v&&!a.userAgent.isFB()&&(ca[C].nol_lstrg="lstrg-"+v)}if(e&&e.hasOwnProperty("nol_TAGS"))for(ca[C].tagSize=e.nol_TAGS.length,ca[C].tags=[],a._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),o=0;o<ca[C].tagSize;o+=1)a._listeners.fireEvent("debug",{type:"debug",msg:String(e.nol_TAGS[o].nol_comment)}),e.nol_TAGS[o].playerId=e.nol_TAGS[o].playerId||C,ca[C].tags.push(new J(e.nol_TAGS[o],n));void 0!==a.enablePlayer&&a.enablePlayer(C,"PLDPR"),ca[C].bReInit=!1,t.nol_hybridCfg&&window&&window.JSON&&(g=window.document.createElement("script"),g.text="(function() {if (typeof "+t.nol_hybridCfg+" === 'function'){"+t.nol_hybridCfg+"('"+JSON.stringify(e)+"')}}())",window.document.head?(window.document.head.appendChild(g),window.document.head.removeChild(g)):(window.document.getElementsByTagName("head")[0].appendChild(g),window.document.getElementsByTagName("head")[0].removeChild(g))),ca[C].forceStreamRegen=!1,a._listeners.addListener("tick",function(){n&&n.hasOwnProperty("pauseObj")&&n.pauseObj.hasOwnProperty("pauseTime")&&(n.pauseObj.pauseTime+=1,n.pauseObj.eventPauseTime+=1)}),n&&n.configLoaded&&Ra.fireCustomEvent("NSDK_Initialized",{
instanceName:n.name,instance:n}),a._listeners.fireEvent("flushQueue")}else window.console&&window.console.warn&&window.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."})}catch(e){window.console&&window.console.error&&window.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response."})}},Y.getCmsMap=function(e){try{if("undefined"!=typeof e&&"string"==typeof e||a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),ca&&ca.hasOwnProperty(e)&&"undefined"!=typeof ca[e].nol_clientCMSmap)return ca[e].nol_clientCMSmap}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},Y.init=function(e){var t=e.getConfigParams()||{},n,r,o=a.getIfLsidShouldSend()?a.getLsId():void 0,i,d="",s=0===ta.indexOf("https")?"https":"http",l=t.playerId||0;i={pli:{val:l,protect:!0},nmspc:{val:"NOLCMB",protect:!0},sdkv:{val:X,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:ia,protect:!0},bldv:{val:aa,protect:!0},prefprotocol:{val:s,protect:!1}},e.addListener("ggPM",function(a){k(a)}),e.lsPopulatedInterval=0,e.lsCurrentRetry=0,e.serviceSending={tsv:!1,stn:!1},e.ottStatusObj={},e.oServiceCall={},e.static={started:!1};for(n in t.ggParams)!t.ggParams.hasOwnProperty(n)||i[n]&&i[n].protect||0==n.indexOf("nol_")||(i[n]={val:p(t.ggParams[n])});for(n in i)i.hasOwnProperty(n)&&(d+=n+"="+i[n].val+"&");d=d.substr(0,d.length-1),r=ta.replace(/[\w\W]*?:\/\//g,""),void 0===o||e.lsPopulatedInterval?void 0===o&&(wa=s+"://"+r+ea+na+"?"+d+"&sendTime="+Math.floor(xa()/1e3),z({configReq:wa,player:e})):e.lsPopulatedInterval=window.setInterval(function(){o=a.getLsId(),"-1"!==o?(wa=s+"://"+r+ea+na+"?"+d+"&lsid="+o+"&sendTime="+Math.floor(xa()/1e3),z({configReq:wa,player:e})):e.lsCurrentRetry===ya?(wa=s+"://"+r+ea+na+"?"+d+"&lsid=999&sendTime="+Math.floor(xa()/1e3),z({configReq:wa,player:e})):e.lsCurrentRetry+=1},1e3)},Y.built||(Y.built=!0,Y.BUILDVERSION=aa,Y.dataObj=ca,a.bindPlayers(Y,"PLDPR"),a._listeners.fireEvent("flushQueue")),Y});