/*
 Nielsen SDK package v0.9.28-3 
 (c) 2017 The Nielsen Company 
*/
/* GGCMB build v5.1.0.35*/
!function(e,t){function n(e){var t,n;for(var r in g){t=g[r];for(var a in t)if(n=t[a],n&&n.hasAttribute&&n.hasAttribute("src")&&n.src.indexOf(d)!==-1&&n&&n.src.indexOf(d)!==-1&&n.src.indexOf("ggcmb5")!==-1)return n.src.substring(0,n.src.indexOf(d)+d.length)}return"undefined"!=typeof o&&"undefined"!=typeof l&&"undefined"!=typeof d?o+l+"cdn-gl"+d:"https://seccdn-gl.imrworldwide.com/"}function r(e){e&&e.hasOwnProperty("target")&&(_="true"===String(e.target).toLowerCase())}function a(){b=Date.now(),L=Math.ceil((b-O)/1e3)}function i(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in h)!function(t){var n=h[t];if(void 0!==n&&n.hasOwnProperty("staticPage")&&n.staticPage.hasOwnProperty("evtParams")){var r=n.staticPage.evtParams;"static"===r.param1.type&&n.ggPM("48",e.target,"","","")}}(t)}function s(n){function s(e){F.staticPage.hasOwnProperty("evtParams")&&F.ggPM("56",F.staticPage.evtParams.param1,F.staticPage.evtParams.param2,F.staticPage.evtParams.param3,F.staticPage.evtParams.param4)}function l(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(O[e.type]instanceof Array)for(var n=O[e.type],r=0,a=n.length;r<a;r++)n[r].call(F,t)}function g(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var n in e.cmsMap)e.cmsMap.hasOwnProperty(n)&&e.cmsMap[n].indexOf("nol_")!==-1&&t.push(e.cmsMap[n].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function y(t){try{var n="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var r=g({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var a in t.fData)if(t.fData.hasOwnProperty(a))for(var i in t.fData[a][0]){var s=String(i);s.indexOf("nol_")!==-1&&r.indexOf(s)===-1||(t[a][i]=t.fData[a][0][i])}return t}return t&&t.hasOwnProperty("err")?(t.err=n+": Missing passedFdata, Ad, content or static properties",t):{err:n}}catch(e){}}function v(t){t&&(t.registerListener("ggPM",F),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",F.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",F.removeAsset),t._listeners.addListener("tick",function(){a(),l("globalTick",{time:b,seconds:L})}),t._listeners.addListener("dcrHeartbeat",i),t._listeners.addListener("flushQueue",F.emptyQueue),t._listeners.addListener("handleSessionReset",F.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",F.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",r)),e.GLCFG=t)}function h(e){if("undefined"!=typeof e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry")){var n={requestUrl:function(){var t=this;try{return++e.currRetry>e.maxRetry?t.logErr("maxRetry reached"):t.sendUrlRequest(e.url)}catch(e){t.logErr("Error in fireToUrl requestUrl: "+e)}},sendUrlRequest:function(n){var r=this;try{if("undefined"==typeof n)return;var a=new Image;a.onerror=function(n){t.setTimeout(function(){r.requestUrl()},e.retryDelay)},a.onload=function(e){},a.src=n+"&retry="+e.currRetry}catch(e){r.logErr("Error in fireToUrl sendUrlRequest: "+e)}},logErr:function(e){e&&t.console&&t.console.log&&console.log("Error: ",e)}};n.requestUrl()}}var P,w,O={},E=[],C={},S=String(Date.now())+Math.round(1e4*Math.random()),D,I=5,T=-1,F={name:n,initialized:!1,staticPage:{},modules:{allModInit:!1},configLoaded:!1},B=function(e,n){return function(r,a){try{n.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function(t){try{t.detail.instanceName===e&&r(t.detail.instance)}catch(e){a&&a(e.message)}}})}catch(e){a&&a(e.message)}}}(F.name,e);return F.getOptOutStatus=function(){return _},F.getId=function(){return S},F.GetName=function(){return F.name},F.Initialized=function(e){return"undefined"==typeof e?F.initialized:void(F.initialized=e)},F.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(C).length:0},F.removeAsset=function(e){"undefined"!=typeof e&&e.target.param1.hasOwnProperty("assetid")&&(F.staticPage={})},F.handleUpdateOfStatic=function(t){if(t&&t.target){var n=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&"undefined"!=typeof n&&n.param1.hasOwnProperty("assetid")&&F.getId()===t.target.plid){var r=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(F.staticPage).length&&F.staticPage.hasOwnProperty("id")&&F.staticPage.id===n.param1.assetid&&F.staticPage.hasOwnProperty("lastTimeStamp")?F.staticPage.lastTimeStamp=r:F.staticPage={id:n.param1.assetid,evtParams:n,startTimeStamp:r,lastTimeStamp:r}}}},F.addListener=function(e,t){t&&("undefined"==typeof O[e]&&(O[e]=[]),O[e].push(t))},F.removeListener=function(e,t){if(F._listeners[e]instanceof Array)for(var n=O[e],r=0,a=n.length;r<a;r++)if(n[r]===t){n.splice(r,1);break}},F.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&S===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===y(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var n=e.target.passedFdata._currVidType,r=Object.keys(t.content).length>0,a=Object.keys(t.ad).length>0;(r||a)&&(F.ggPM("57","1","","",""),r&&!C.hasOwnProperty("content")&&(C.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}))}}F._listeners&&F._listeners.fireEvent&&F._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},F.flushPauseEventQueue=function(){if(!(Object.keys(C).length<=0)){if(F.modules.PLDPR){var e;for(e in C)l("ggPM",{evtInfo:{eventType:C[e].evt,param1:C[e].meta},id:S});C={}}F._listeners&&F._listeners.fireEvent&&F._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},F.ggPM=function(e,t,n,r,a){if(F.initialized&&void 0!==e&&null!==e&&""!==e){var i={};i.eventType=e,i.param1=t,i.param2=n,i.param3=r,i.param4=a,!F.modules.allModInit||2!=F.modules.PLCMB&&2!=F.modules.PLDPR?E.push(i):(F.emptyQueue(),l("ggPM",{evtInfo:i,id:S}))}},F.getConfigParams=function(){return w},F.emptyQueue=function(){if(!(E.length<=0)&&F.modules.allModInit&&(F.modules.PLCMB||F.modules.PLDPR)){for(var e=0,t=E.length;e<t;e+=1)l("ggPM",{evtInfo:E[e],id:S});E=[]}},F.getContainer=function(){return D},F.ggInitialize=function(t,n,r,a,i,s){var l,g,y,h="us",P="cdn-gl";if(D=s,w={ggParams:t,uid:r,oldFlashDetect:a,detectBrowser:i,playerId:S},typeof t==typeof String()){for(l=e.loadXmlString("<vi>"+t+"</vi>"),g=l.firstChild.firstChild,y=0,t={};g&&"undefined"!=typeof g&&y<20;)null!==g.firstChild&&(t[g.nodeName]=g.firstChild.nodeValue),g=g.nextSibling,y++;w.ggParams=t}return F.Initialized(!0),f=t.nsdkv||f,h=t.sfcode||h,m=t.coreaddress||o+c+h+d,M=t.sdkconfigver||M,e.loadLib("GLCFG",p+"novms/js/2/configs/"+u,e,v),k.Promise(B)},F.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function(e){F&&F.staticPage&&s(F.staticPage)}}),F}if(!e.isBuilt||!e.isBuilt()){var o=t.location.protocol.indexOf("https")!==-1?"https:":"http:",c="//secure-",l="https:"===t.location.protocol?"//sec":"//",d=".imrworldwide.com/",u="glcfg510.js",f="510",g={head:document.getElementsByTagName("head")[0].getElementsByTagName("script"),body:document.getElementsByTagName("script")},p=n(),m=o+"//secure-us.imrworldwide.com/",y="imrworldwide.com",v=864e5,h=e.getInstances?e.getInstances():{},P=1,w=5,O=0,b=0,L=0,E=!1,_=!1,C="//secure-gl.imrworldwide.com/cgi-bin/gn?prd=session&c9=devid,&c13=asid,",M="bj.5.0.0",S="5.1.0.35";Date.now=Date.now||function(){return+new Date};var k={Promise:function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}var n=function(e){var t=function(e){r&&r(e)},n=function(e){a&&a(e)},r=null,a=null;return e(t,n),{then:function(e,t){r=e,a=t}}};return new n(e)}};if(e.sdkvForConfig=function(){return M},e.isBuilt=function(){return E},e.getInstance=function(e){var t="undefined"!=typeof e&&("string"==typeof e||"object"==typeof e&&e.constructor===String)?e:"default";return h.hasOwnProperty(t)||(h[t]=s(t)),h[t]},e.setTotalNumAssetsAllowed=function(e){P=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return p},e.getConfigAddress=function(){return m},e.getInstances=function(){return h},e.loadXmlString=function(e){var t=null;try{return t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e),t}catch(r){try{var n=new DOMParser;return t=n.parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if("undefined"!=typeof e){var n=e.indexOf("?"),r=e.indexOf(y);r>-1&&r<n&&(t=!0)}return t},e.getVersion=function(){return f},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){"undefined"!=typeof e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){void 0!==e&&null!==e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},function(){var n={};e.loadLib=function(e,r,a,i){if(void 0!==e&&null!==e&&"string"==typeof e&&void 0!==r&&null!==r&&"string"==typeof r)if(n[e]){if(n[e].body)return void i(n[e].body(a));n[e].callbacks.push({func:i,arg:a})}else{n[e]={callbacks:[]},n[e].callbacks.push({func:i,arg:a});var s=t.document.createElement("script");s.async=!0,s.src=r,t.document.getElementsByTagName("head")[0].appendChild(s)}},e.registerLib=function(e,t){try{if(n&&n.hasOwnProperty(e)){var r=n[e];r.body=t;for(var a=r.callbacks.shift();a;)a.func(r.body(a.arg)),a=r.callbacks.shift()}}catch(e){}}}(),t.gg_nol_FlashCallBack){for(var D=0,I,T=t.gg_nol_FlashCallBack.length;D<T;D+=1)t.gg_nol_FlashCallBack[D].hasOwnProperty("callBack")&&(I=document.getElementById(t.gg_nol_FlashCallBack[D].swfId),I&&I[t.gg_nol_FlashCallBack[D].callBack]());t.gg_nol_FlashCallBack=void 0}return E||(E=!0,O=b=Date.now(),e.BUILDVERSION=S),e}}(window.NOLCMB=window.NOLCMB||{},window);