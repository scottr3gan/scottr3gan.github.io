<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>



<script type='text/javascript'>
googletag.cmd.push(function() {

var mapping = googletag.sizeMapping().
        addSize([320, 0], [320, 50]).
        addSize([768, 0], [728, 90]).
        build();
window.slot1= googletag.defineSlot('/267198596/TestSite', [320,50], 'div-gpt-ad-slot-1').
defineSizeMapping(mapping).
setTargeting('pos',['1']).
addService(googletag.pubads());

var mapping2 = googletag.sizeMapping().
        addSize([300, 0], [300, 250]).
        addSize([300, 600], [160, 600]).
        addSize([640, 0], [300, 600]).
        build();
window.slot2= googletag.defineSlot('/267198596/TestSite', [300,250], 'div-gpt-ad-slot-2').
defineSizeMapping(mapping2).
setTargeting('pos',['1']).
addService(googletag.pubads());

googletag.pubads().collapseEmptyDivs();
// googletag.pubads().enableSingleRequest();
googletag.pubads().enableAsyncRendering();
googletag.enableServices();
});
</script>
<script>
  var _now = Date.now || function() { return new Date().getTime(); };
  var _debounce = function(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};

window.addEventListener("resize", _debounce(function() {
    console.log ("Doing ad refresh on resize");
    googletag.pubads().refresh([window.slot1,window.slot2]);
  }, 200)
);
</script>

</head>
<body>


<p>Test slot 1</p>
<div id='div-gpt-ad-slot-1'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-slot-1'); });
</script>
</div>

<p>Test slot 2</p>
<div id='div-gpt-ad-slot-2'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-slot-2'); });
</script>
</div>
      

</body>
</html>
